#### ğŸ“… **Date**: 2025-03-13

#### ğŸ”– **Tags**: #CSharp #dotNET #BackEnd #InterviewQuestions

---

åœ¨ **C# å’Œ .NET** ä¸­ï¼Œ`IQueryable` å’Œ `IEnumerable` æ˜¯ **LINQ æŸ¥è©¢çš„æ ¸å¿ƒä»‹é¢**ï¼Œå®ƒå€‘å½±éŸ¿**è³‡æ–™è™•ç†çš„æ–¹å¼**ï¼Œè€Œ `ToList()` å‰‡æ±ºå®šäº†**æŸ¥è©¢ä½•æ™‚åŸ·è¡Œ**ã€‚

---

## **ğŸ“ 1. IQueryable vs IEnumerable**

### **âœ… ä¸»è¦å€åˆ¥**

|          | **IQueryable**                      | **IEnumerable**               |
| -------- | ----------------------------------- | ----------------------------- |
| **å®šç¾©**   | é©ç”¨æ–¼è³‡æ–™åº«æŸ¥è©¢ï¼ˆå¦‚ `EF Core`ï¼‰               | é©ç”¨æ–¼è¨˜æ†¶é«”å…§é›†åˆ                     |
| **åŸ·è¡Œæ–¹å¼** | **å»¶é²åŸ·è¡Œï¼ˆLazy Executionï¼‰**ï¼Œè½‰æ›ç‚º SQL æŸ¥è©¢ | **ç«‹å³åŸ·è¡Œï¼ˆImmediate Executionï¼‰** |
| **é‹è¡Œä½ç½®** | **è³‡æ–™åº«ï¼ˆServer-Sideï¼‰**                | **è¨˜æ†¶é«”ï¼ˆClient-Sideï¼‰**          |
| **é©ç”¨å ´æ™¯** | **å¤§æ•¸æ“šæŸ¥è©¢ï¼ˆæœ€ä½³åŒ– SQLï¼‰**                  | **å°å‹é›†åˆè™•ç†ï¼ˆå·²è¼‰å…¥è¨˜æ†¶é«”ï¼‰**            |

---

## **ğŸ“ 2. `IQueryable`ï¼ˆSQL å„ªåŒ–æŸ¥è©¢ï¼‰**

`IQueryable<T>` **å¯å°‡ LINQ è½‰æ›ç‚º SQL**ï¼Œåƒ…åœ¨**èª¿ç”¨ `ToList()`ã€`FirstOrDefault()`ã€`Count()` æ™‚æ‰åŸ·è¡ŒæŸ¥è©¢**ã€‚

### **ğŸ”¹ ç¯„ä¾‹**

csharp

è¤‡è£½ç·¨è¼¯

`using System; using System.Linq; using Microsoft.EntityFrameworkCore;  class Program {     static void Main() {         using (var db = new AppDbContext()) {             IQueryable<User> query = db.Users.Where(u => u.Age > 18); // SQL å°šæœªåŸ·è¡Œ             var users = query.ToList(); // SQL åŸ·è¡Œï¼Œçµæœè¼‰å…¥è¨˜æ†¶é«”         }     } }`

### **ğŸ“Œ `IQueryable` çš„å„ªå‹¢**

âœ” **æŸ¥è©¢åœ¨ SQL Server åŸ·è¡Œï¼ˆæ•ˆç‡é«˜ï¼‰**  
âœ” **`WHERE`ã€`ORDER BY`ã€`SELECT` æœƒè½‰ç‚º SQL**  
âœ” **é©ç”¨æ–¼ EF Coreã€NHibernateã€Dapper**

ğŸ”¹ **ç”¢ç”Ÿçš„ SQL**

sql

è¤‡è£½ç·¨è¼¯

`SELECT * FROM Users WHERE Age > 18;`

---

## **ğŸ“ 3. `IEnumerable`ï¼ˆè¨˜æ†¶é«”å…§æŸ¥è©¢ï¼‰**

`IEnumerable<T>` **å·²ç¶“è¼‰å…¥åˆ°è¨˜æ†¶é«”**ï¼Œæ‰€æœ‰ LINQ é‹ç®—éƒ½åœ¨ **C# å±¤é¢ï¼ˆClient-Sideï¼‰åŸ·è¡Œ**ã€‚

### **ğŸ”¹ ç¯„ä¾‹**

csharp

è¤‡è£½ç·¨è¼¯

`IEnumerable<User> users = db.Users.ToList(); // SQL ç«‹å³åŸ·è¡Œ var filteredUsers = users.Where(u => u.Age > 18); // åœ¨ C# å±¤é¢ç¯©é¸`

### **ğŸ“Œ `IEnumerable` çš„åŠ£å‹¢**

âŒ **æ‰€æœ‰æ•¸æ“šéƒ½è¼‰å…¥è¨˜æ†¶é«”ï¼Œå½±éŸ¿æ•ˆèƒ½**  
âŒ **ç„¡æ³•è½‰æ›æˆ SQL æŸ¥è©¢**  
âŒ **é©ç”¨æ–¼å°å‹é›†åˆï¼Œä¸é©åˆå¤§æ•¸æ“šæŸ¥è©¢**

ğŸ”¹ **ç”¢ç”Ÿçš„ SQL**

sql

è¤‡è£½ç·¨è¼¯

`SELECT * FROM Users; -- è¼‰å…¥æ‰€æœ‰è³‡æ–™`

ğŸ“Œ **ç¯©é¸æ¢ä»¶ (`.Where()`) åœ¨ C# å±¤é¢åŸ·è¡Œï¼ŒSQL æ²’æœ‰éæ¿¾ï¼Œé€ æˆæ•ˆèƒ½å•é¡Œï¼**

---

## **ğŸ“ 4. `ToList()` æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ**

`ToList()` **æœƒå¼·åˆ¶åŸ·è¡ŒæŸ¥è©¢ï¼Œå°‡ `IQueryable` è½‰ç‚º `List<T>`ï¼Œè³‡æ–™è¼‰å…¥è¨˜æ†¶é«”**ã€‚

### **ğŸ”¹ `ToList()` å½±éŸ¿æŸ¥è©¢æ–¹å¼**

csharp

è¤‡è£½ç·¨è¼¯

`// IQueryableï¼ˆSQL åŸ·è¡Œå‰ï¼‰ var query = db.Users.Where(u => u.Age > 18);  // SQL æœƒåœ¨æ­¤æ™‚åŸ·è¡Œ var usersList = query.ToList();` 

ğŸ“Œ **`ToList()` æœƒè§¸ç™¼ SQL æŸ¥è©¢ï¼Œä¸¦å°‡çµæœè¼‰å…¥è¨˜æ†¶é«”ã€‚**

---

## **ğŸ“ 5. `IQueryable` vs `IEnumerable` vs `ToList()`**

||**IQueryable**|**IEnumerable**|**ToList()**|
|---|---|---|---|
|**é‹è¡Œä½ç½®**|**SQL Serverï¼ˆServer-Sideï¼‰**|**è¨˜æ†¶é«”ï¼ˆClient-Sideï¼‰**|**è¨˜æ†¶é«”ï¼ˆClient-Sideï¼‰**|
|**æŸ¥è©¢æ–¹å¼**|**å»¶é²åŸ·è¡Œï¼ˆLazyï¼‰**|**ç«‹å³åŸ·è¡Œï¼ˆImmediateï¼‰**|**å¼·åˆ¶åŸ·è¡Œ SQL æŸ¥è©¢**|
|**æ•ˆèƒ½**|**å¤§æ•¸æ“šæœ€ä½³åŒ–**|**é©ç”¨æ–¼å°å‹é›†åˆ**|**è½‰æ›æˆ `List<T>`ï¼Œå¢åŠ è¨˜æ†¶é«”ä½¿ç”¨**|
|**é©ç”¨å ´æ™¯**|**æ•¸æ“šåº«æŸ¥è©¢ï¼ˆEF Coreï¼‰**|**æœ¬åœ°é›†åˆï¼ˆListã€Arrayï¼‰**|**ç²å–æœ€çµ‚çµæœ**|

---

## **ğŸ“Œ ç¸½çµ**

1ï¸âƒ£ **`IQueryable` è®“æŸ¥è©¢åœ¨ SQL Server åŸ·è¡Œï¼Œæ¸›å°‘è¨˜æ†¶é«”ä½¿ç”¨ï¼Œé©åˆå¤§æ•¸æ“šæŸ¥è©¢ã€‚**  
2ï¸âƒ£ **`IEnumerable` æœƒå°‡æ‰€æœ‰æ•¸æ“šè¼‰å…¥è¨˜æ†¶é«”ï¼Œé©åˆå°å‹é›†åˆï¼Œä¸é©ç”¨æ–¼ SQL æŸ¥è©¢ã€‚**  
3ï¸âƒ£ **`ToList()` æœƒç«‹å³åŸ·è¡ŒæŸ¥è©¢ï¼Œå°‡ `IQueryable` è½‰æ›æˆ `List<T>`ï¼Œé©åˆç²å–æœ€çµ‚çµæœã€‚**

---

ğŸ”¥ **é¢è©¦æŠ€å·§** å¦‚æœé¢è©¦å®˜å•ï¼šã€Œ`IQueryable` å’Œ `IEnumerable` çš„å€åˆ¥ï¼Ÿã€  
âœ… **å›ç­”**ï¼šã€Œ`IQueryable` å…è¨± SQL å„ªåŒ–ï¼ŒæŸ¥è©¢åœ¨è³‡æ–™åº«åŸ·è¡Œï¼Œ`IEnumerable` æœƒå°‡æ•¸æ“šè¼‰å…¥è¨˜æ†¶é«”ï¼Œé©åˆå°å‹é›†åˆã€‚ã€